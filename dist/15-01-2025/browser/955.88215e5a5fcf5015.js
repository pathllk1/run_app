"use strict";(self.webpackChunk_15_01_2025=self.webpackChunk_15_01_2025||[]).push([[955],{5955:(C,m,d)=>{d.r(m),d.d(m,{AuthModule:()=>_});var u=d(6895),c=d(6773),e=d(8256);function f(s,t){if(1&s){const a=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.TgZ(3,"button",3),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.close())}),e._uU(4,"Close"),e.qZA()()()}if(2&s){const a=e.oxw();e.xp6(2),e.hij(" ",a.message," ")}}let p=(()=>{const t=class{constructor(){this.message="",this.show=!1}display(n){this.message=n,this.show=!0,setTimeout(()=>this.close(),3e3)}close(){this.show=!1}};let s=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-toast"]],inputs:{message:"message"},decls:1,vars:1,consts:[["class","fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",4,"ngIf"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-800","bg-opacity-50"],[1,"bg-red-500","text-white","p-4","rounded-md","shadow-lg"],[1,"ml-4","text-white","underline",3,"click"]],template:function(o,r){1&o&&e.YNc(0,f,5,1,"div",0),2&o&&e.Q6J("ngIf",r.show)},dependencies:[u.O5],encapsulation:2}),s})();var b=d(529);let h=(()=>{const t=class{constructor(n){this.http=n,this.apiUrl="/api/auth/"}register(n){return this.http.post(this.apiUrl+"register",n)}login(n){return this.http.post(this.apiUrl+"login",n)}};let s=t;return t.\u0275fac=function(o){return new(o||t)(e.LFG(b.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var y=d(5174),i=d(433);function w(s,t){if(1&s){const a=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),e._uU(3,"Login"),e.qZA(),e.TgZ(4,"form",4),e.NdJ("ngSubmit",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.onLogin())}),e.TgZ(5,"div",5)(6,"label",6),e._uU(7,"Username:"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(o){e.CHM(a);const r=e.oxw();return e.KtG(r.credentials.username=o)}),e.qZA()(),e.TgZ(9,"div",8)(10,"label",9),e._uU(11,"Password:"),e.qZA(),e.TgZ(12,"input",10),e.NdJ("ngModelChange",function(o){e.CHM(a);const r=e.oxw();return e.KtG(r.credentials.password=o)}),e.qZA()(),e.TgZ(13,"button",11),e._uU(14,"Login"),e.qZA()(),e._UZ(15,"app-toast"),e.qZA()()}if(2&s){const a=e.oxw();e.xp6(8),e.Q6J("ngModel",a.credentials.username),e.xp6(4),e.Q6J("ngModel",a.credentials.password)}}function x(s,t){1&s&&(e.TgZ(0,"div",1)(1,"h2",3),e._uU(2,"You are already logged in."),e.qZA()())}const v=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{const t=class{constructor(n,o,r,l){this.authService=n,this.router=o,this.tokenStorage=r,this.platformId=l,this.credentials={username:"",password:""},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){(0,u.NF)(this.platformId)&&this.tokenStorage.getToken()&&(this.isLoggedIn=!0,this.roles=this.tokenStorage.getUser().roles)}onLogin(){this.authService.login(this.credentials).subscribe(n=>{this.tokenStorage.saveToken(n.token),this.tokenStorage.saveUser(n),this.isLoginFailed=!1,this.isLoggedIn=!0,this.reloadPage()},n=>{console.error("Login failed",n),this.showToast("Login failed. Please check your credentials.")})}showToast(n){this.toast.display(n)}reloadPage(){window.location.reload()}};let s=t;return t.\u0275fac=function(o){return new(o||t)(e.Y36(h),e.Y36(c.F0),e.Y36(y.i),e.Y36(e.Lbi))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],viewQuery:function(o,r){if(1&o&&e.Gf(p,5),2&o){let l;e.iGM(l=e.CRH())&&(r.toast=l.first)}},decls:2,vars:2,consts:[["class","flex items-center justify-center h-screen bg-gray-100",4,"ngIf"],[1,"flex","items-center","justify-center","h-screen","bg-gray-100"],[1,"bg-white","p-8","rounded-lg","shadow-md","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","username","name","username","required","","placeholder","Enter your username",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","required","","placeholder","Enter your password",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["type","submit",1,"w-full","bg-blue-500","text-white","py-2","rounded-md","hover:bg-blue-600"]],template:function(o,r){1&o&&(e.YNc(0,w,16,2,"div",0),e.YNc(1,x,3,0,"div",0)),2&o&&(e.Q6J("ngIf",!r.isLoggedIn),e.xp6(1),e.Q6J("ngIf",r.isLoggedIn))},dependencies:[u.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.On,i.F,p]}),s})()},{path:"register",component:(()=>{const t=class{constructor(n,o){this.authService=n,this.router=o,this.userData={username:"",email:"",fullname:"",password:""}}onRegister(){this.authService.register(this.userData).subscribe(n=>{console.log("Registration successful",n),this.router.navigate(["/login"])},n=>{console.error("Registration failed",n)})}};let s=t;return t.\u0275fac=function(o){return new(o||t)(e.Y36(h),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:23,vars:4,consts:[[1,"flex","items-center","justify-center","h-screen","bg-gray-100"],[1,"bg-white","p-8","rounded-lg","shadow-md","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","username","name","username","required","","placeholder","Enter your username",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","required","","placeholder","Enter your email",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["for","fullname",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","fullname","name","fullname","required","","placeholder","Enter your full name",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","required","","placeholder","Enter your password",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["type","submit",1,"w-full","bg-blue-500","text-white","py-2","rounded-md","hover:bg-blue-600"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Register"),e.qZA(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return r.onRegister()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"Username:"),e.qZA(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(g){return r.userData.username=g}),e.qZA()(),e.TgZ(9,"div",4)(10,"label",7),e._uU(11,"Email:"),e.qZA(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(g){return r.userData.email=g}),e.qZA()(),e.TgZ(13,"div",4)(14,"label",9),e._uU(15,"Full Name:"),e.qZA(),e.TgZ(16,"input",10),e.NdJ("ngModelChange",function(g){return r.userData.fullname=g}),e.qZA()(),e.TgZ(17,"div",11)(18,"label",12),e._uU(19,"Password:"),e.qZA(),e.TgZ(20,"input",13),e.NdJ("ngModelChange",function(g){return r.userData.password=g}),e.qZA()(),e.TgZ(21,"button",14),e._uU(22,"Register"),e.qZA()()()()),2&o&&(e.xp6(8),e.Q6J("ngModel",r.userData.username),e.xp6(4),e.Q6J("ngModel",r.userData.email),e.xp6(4),e.Q6J("ngModel",r.userData.fullname),e.xp6(4),e.Q6J("ngModel",r.userData.password))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.On,i.F]}),s})()}];let T=(()=>{const t=class{};let s=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(v),c.Bz]}),s})(),_=(()=>{const t=class{};let s=t;return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,T,i.u5,i.UX]}),s})()}}]);