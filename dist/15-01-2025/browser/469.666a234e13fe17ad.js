"use strict";(self.webpackChunk_15_01_2025=self.webpackChunk_15_01_2025||[]).push([[469],{1469:(I,p,u)=>{u.r(p),u.d(p,{NseModule:()=>D});var g=u(6895),a=u(433),m=u(6773);function h(l,s,o,e,n,r,i){try{var c=l[r](i),d=c.value}catch(_){return void o(_)}c.done?s(d):Promise.resolve(d).then(e,n)}var t=u(8256),b=u(9646),Z=u(529);let x=(()=>{const s=class{constructor(e){this.http=e,this.apiUrl="/api/nse"}getFolioData(){return(0,b.of)({id:1,name:"Sample Folio",balance:1e3})}getNSERecords(){return this.http.get(`${this.apiUrl}/get_nse`)}upsertFolio(e){return this.http.post(`${this.apiUrl}/upsert_folio`,e)}getAllFolioRecords(){return this.http.get(`${this.apiUrl}/folio`)}getAllCnNote(){return this.http.get(`${this.apiUrl}/cn_note`)}gs_sheet(){return this.http.get(`${this.apiUrl}/gs_sheet`)}submitData(e,n){return this.http.post(`${this.apiUrl}/addnse_data`,{formData:e,recordsData:n})}updateData(e,n){return this.http.post(`${this.apiUrl}/updnse_data`,{formData:e,recordsData:n})}};let l=s;return s.\u0275fac=function(n){return new(n||s)(t.LFG(Z.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),l})();function C(l,s){1&l&&(t.TgZ(0,"h3",60),t._uU(1,"Add New Contract Note"),t.qZA())}function T(l,s){1&l&&(t.TgZ(0,"h3",60),t._uU(1,"Update Data"),t.qZA())}function y(l,s){if(1&l&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&l){const o=s.$implicit;t.xp6(1),t.hij(" ",o.SYMBOL," ")}}function A(l,s){if(1&l){const o=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",36)(4,"input",40),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.symbol=n)}),t.qZA()(),t.TgZ(5,"td",36)(6,"input",40),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.sector=n)}),t.qZA()(),t.TgZ(7,"td",36)(8,"input",40),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.price=n)}),t.qZA()(),t.TgZ(9,"td",36)(10,"input",40),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.qnty=n)})("ngModelChange",function(){const r=t.CHM(o).$implicit,i=t.oxw(2);return t.KtG(i.calculateAmount(r))}),t.qZA()(),t.TgZ(11,"td",36)(12,"input",40),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.amt=n)}),t.qZA()(),t.TgZ(13,"td",36)(14,"input",41),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.brokerage=n)})("keydown.enter",function(){const r=t.CHM(o).$implicit,i=t.oxw(2);return t.KtG(i.updateRowData(r))})("ngModelChange",function(){const r=t.CHM(o).$implicit,i=t.oxw(2);return t.KtG(i.calculatenAmount(r))}),t.qZA()(),t.TgZ(15,"td",36)(16,"input",40),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.namt=n)}),t.qZA()(),t.TgZ(17,"td",42)(18,"input",43),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.broker=n)}),t.qZA()(),t.TgZ(19,"td",42)(20,"input",43),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.pdate=n)}),t.qZA()(),t.TgZ(21,"td",42)(22,"input",43),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.folio=n)}),t.qZA()(),t.TgZ(23,"td",42)(24,"input",43),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.type=n)}),t.qZA()(),t.TgZ(25,"td",42)(26,"input",43),t.NdJ("ngModelChange",function(n){const i=t.CHM(o).$implicit;return t.KtG(i.rid=n)}),t.qZA()(),t.TgZ(27,"td",44)(28,"button",61),t.NdJ("click",function(){const r=t.CHM(o).$implicit,i=t.oxw(2);return t.KtG(i.updateRowData(r))}),t.O4$(),t.TgZ(29,"svg",62),t._UZ(30,"path",63),t.qZA()(),t._uU(31," | "),t.kcU(),t.TgZ(32,"button",64),t.NdJ("click",function(){const r=t.CHM(o).$implicit,i=t.oxw(2);return t.KtG(i.deleteRowData(r))}),t.O4$(),t.TgZ(33,"svg",65),t._UZ(34,"path",66)(35,"path",67),t.qZA()()()()}if(2&l){const o=s.$implicit,e=s.index;t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Q6J("ngModel",o.symbol),t.xp6(2),t.Q6J("ngModel",o.sector),t.xp6(2),t.Q6J("ngModel",o.price),t.xp6(2),t.Q6J("ngModel",o.qnty),t.xp6(2),t.Q6J("ngModel",o.amt),t.xp6(2),t.Q6J("ngModel",o.brokerage),t.xp6(2),t.Q6J("ngModel",o.namt),t.xp6(2),t.Q6J("ngModel",o.broker),t.xp6(2),t.Q6J("ngModel",o.pdate),t.xp6(2),t.Q6J("ngModel",o.folio),t.xp6(2),t.Q6J("ngModel",o.type),t.xp6(2),t.Q6J("ngModel",o.rid)}}function q(l,s){if(1&l){const o=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"form",13),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit())})("keydown",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.handleKeyDown(n))}),t.TgZ(3,"div",14),t.YNc(4,C,2,0,"h3",15),t.YNc(5,T,2,0,"h3",15),t.TgZ(6,"button",16),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.closemodal())}),t.O4$(),t.TgZ(7,"svg",17),t._UZ(8,"path",18),t.qZA()()(),t.kcU(),t.TgZ(9,"div",19)(10,"div")(11,"div",20)(12,"div")(13,"label",21),t._uU(14,"CN No:"),t.qZA(),t._UZ(15,"input",22),t.qZA(),t.TgZ(16,"div")(17,"label",23),t._uU(18,"CN Date:"),t.qZA(),t._UZ(19,"input",24),t.qZA(),t.TgZ(20,"div")(21,"label",25),t._uU(22,"Broker:"),t.qZA(),t._UZ(23,"input",26),t.qZA(),t.TgZ(24,"div")(25,"label",27),t._uU(26,"Folio:"),t.qZA(),t._UZ(27,"input",28),t.qZA(),t.TgZ(28,"div"),t._UZ(29,"input",29),t.qZA()(),t.TgZ(30,"div"),t._UZ(31,"input",30),t.qZA(),t.TgZ(32,"div"),t._UZ(33,"input",31),t.qZA()()()(),t.TgZ(34,"div",19)(35,"table",32)(36,"thead")(37,"tr")(38,"th"),t._uU(39,"SL NO"),t.qZA(),t.TgZ(40,"th",33),t._uU(41,"Symbol"),t.qZA(),t.TgZ(42,"th",33),t._uU(43,"Sector"),t.qZA(),t.TgZ(44,"th",33),t._uU(45,"Price"),t.qZA(),t.TgZ(46,"th",33),t._uU(47,"Quantity"),t.qZA(),t.TgZ(48,"th",33),t._uU(49,"Amount"),t.qZA(),t.TgZ(50,"th",33),t._uU(51,"Brokerage"),t.qZA(),t.TgZ(52,"th",33),t._uU(53,"NAMT"),t.qZA(),t.TgZ(54,"th",34),t._uU(55,"Broker"),t.qZA(),t.TgZ(56,"th",34),t._uU(57,"PDATE"),t.qZA(),t.TgZ(58,"th",34),t._uU(59,"Folio"),t.qZA(),t.TgZ(60,"th",34),t._uU(61,"Type"),t.qZA(),t.TgZ(62,"th",34),t._uU(63,"rid"),t.qZA(),t.TgZ(64,"th",35),t._uU(65,"Action"),t.qZA()()(),t.TgZ(66,"tbody")(67,"tr")(68,"td"),t._uU(69),t.qZA(),t.TgZ(70,"td",36)(71,"input",37),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.symbol=n)}),t.qZA(),t.TgZ(72,"datalist",38),t.YNc(73,y,2,1,"option",39),t.qZA()(),t.TgZ(74,"td",36)(75,"input",40),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.sector=n)}),t.qZA()(),t.TgZ(76,"td",36)(77,"input",40),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.price=n)}),t.qZA()(),t.TgZ(78,"td",36)(79,"input",40),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.qnty=n)})("ngModelChange",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.calculateAmount(n.tableData))}),t.qZA()(),t.TgZ(80,"td",36)(81,"input",40),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.amt=n)}),t.qZA()(),t.TgZ(82,"td",36)(83,"input",41),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.brokerage=n)})("ngModelChange",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.calculatenAmount(n.tableData))})("keydown.enter",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.updateRowData(n.tableData))}),t.qZA()(),t.TgZ(84,"td",36)(85,"input",40),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.namt=n)}),t.qZA()(),t.TgZ(86,"td",42)(87,"input",43),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.broker=n)}),t.qZA()(),t.TgZ(88,"td",42)(89,"input",43),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.pdate=n)}),t.qZA()(),t.TgZ(90,"td",42)(91,"input",43),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.folio=n)}),t.qZA()(),t.TgZ(92,"td",42)(93,"input",43),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.type=n)}),t.qZA()(),t.TgZ(94,"td",42)(95,"input",43),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.tableData.rid=n)}),t.qZA()(),t.TgZ(96,"td",44)(97,"button",45),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.updateRowData(n.tableData))}),t.O4$(),t.TgZ(98,"svg",46),t._UZ(99,"path",47)(100,"path",48),t.qZA()()()(),t.YNc(101,A,36,13,"tr",39),t.qZA()()(),t.kcU(),t.TgZ(102,"div",49)(103,"div",50)(104,"label",51),t._uU(105,"Other Charges:"),t.qZA(),t.TgZ(106,"input",52),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.oth_chg1=n)})("ngModelChange",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.updateCharges())}),t.qZA()(),t.TgZ(107,"div",53)(108,"label",54),t._uU(109,"Final Amount:"),t.qZA(),t.TgZ(110,"input",55),t.NdJ("ngModelChange",function(n){t.CHM(o);const r=t.oxw();return t.KtG(r.famt1=n)}),t.qZA()()(),t.TgZ(111,"div",56)(112,"button",57),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit())}),t._uU(113,"Submit"),t.qZA(),t.TgZ(114,"button",58),t._uU(115,"Cancel"),t.qZA(),t.TgZ(116,"button",59),t._uU(117,"Delete"),t.qZA()()()()}if(2&l){const o=t.oxw();t.xp6(2),t.Q6J("formGroup",o.documentForm),t.xp6(2),t.Q6J("ngIf",!o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(64),t.Oqu(o.nseRecords.length+1),t.xp6(2),t.Q6J("ngModel",o.tableData.symbol),t.xp6(2),t.Q6J("ngForOf",o.nseRecords_all),t.xp6(2),t.Q6J("ngModel",o.tableData.sector),t.xp6(2),t.Q6J("ngModel",o.tableData.price),t.xp6(2),t.Q6J("ngModel",o.tableData.qnty),t.xp6(2),t.Q6J("ngModel",o.tableData.amt),t.xp6(2),t.Q6J("ngModel",o.tableData.brokerage),t.xp6(2),t.Q6J("ngModel",o.tableData.namt),t.xp6(2),t.Q6J("ngModel",o.tableData.broker),t.xp6(2),t.Q6J("ngModel",o.tableData.pdate),t.xp6(2),t.Q6J("ngModel",o.tableData.folio),t.xp6(2),t.Q6J("ngModel",o.tableData.type),t.xp6(2),t.Q6J("ngModel",o.tableData.rid),t.xp6(6),t.Q6J("ngForOf",o.nseRecords),t.xp6(5),t.Q6J("ngModel",o.oth_chg1),t.xp6(4),t.Q6J("ngModel",o.famt1)}}function v(l,s){if(1&l&&(t.TgZ(0,"tr")(1,"td",74),t._uU(2),t.qZA(),t.TgZ(3,"td",74),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",74),t._uU(7),t.qZA(),t.TgZ(8,"td",74),t._uU(9),t.qZA(),t.TgZ(10,"td",74),t._uU(11),t.qZA(),t.TgZ(12,"td",74),t._uU(13),t.qZA(),t.TgZ(14,"td",74),t._uU(15),t.qZA(),t.TgZ(16,"td",74),t._uU(17),t.qZA(),t.TgZ(18,"td",74),t._uU(19),t.qZA(),t.TgZ(20,"td",74),t._uU(21),t.qZA(),t.TgZ(22,"td",74),t._uU(23),t.qZA(),t.TgZ(24,"td",74),t._uU(25),t.qZA(),t.TgZ(26,"td",74),t._uU(27),t.qZA()()),2&l){const o=s.$implicit;t.xp6(2),t.Oqu(o.symbol),t.xp6(2),t.Oqu(t.lcZ(5,13,o.pdate)),t.xp6(3),t.Oqu(o.price),t.xp6(2),t.Oqu(o.qnty),t.xp6(2),t.Oqu(o.amt),t.xp6(2),t.Oqu(o.broker),t.xp6(2),t.Oqu(o.brokerage),t.xp6(2),t.Oqu(o.namt),t.xp6(2),t.Oqu(o.folio),t.xp6(2),t.Oqu(o.type),t.xp6(2),t.Oqu(o.cprice),t.xp6(2),t.Oqu(o.age),t.xp6(2),t.Oqu(o.pl)}}function w(l,s){if(1&l){const o=t.EpF();t.TgZ(0,"div",68)(1,"div",12)(2,"div",14)(3,"h3",60),t._uU(4,"All Records"),t.qZA(),t.TgZ(5,"button",16),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.Show_all_rec=!1)}),t.O4$(),t.TgZ(6,"svg",17),t._UZ(7,"path",18),t.qZA()()(),t.kcU(),t.TgZ(8,"table")(9,"tr"),t._UZ(10,"td",69),t.TgZ(11,"td",69)(12,"table",70)(13,"thead",71)(14,"tr")(15,"th",72),t._uU(16," SYMBOL "),t.qZA(),t.TgZ(17,"th",72),t._uU(18," PDATE "),t.qZA(),t.TgZ(19,"th",72),t._uU(20," PRICE "),t.qZA(),t.TgZ(21,"th",72),t._uU(22," QNTY"),t.qZA(),t.TgZ(23,"th",72),t._uU(24,"AMT "),t.qZA(),t.TgZ(25,"th",72),t._uU(26," BROKER "),t.qZA(),t.TgZ(27,"th",72),t._uU(28," BROKERAGE "),t.qZA(),t.TgZ(29,"th",72),t._uU(30," NAMT"),t.qZA(),t.TgZ(31,"th",72),t._uU(32," FOLIO "),t.qZA(),t.TgZ(33,"th",72),t._uU(34," TYPE"),t.qZA(),t.TgZ(35,"th",72),t._uU(36," CPRICE "),t.qZA(),t.TgZ(37,"th",72),t._uU(38,"AGE "),t.qZA(),t.TgZ(39,"th",72),t._uU(40,"PL "),t.qZA()()(),t.TgZ(41,"tbody",73),t.YNc(42,v,28,15,"tr",39),t.qZA()()()()()()()}if(2&l){const o=t.oxw();t.xp6(42),t.Q6J("ngForOf",o.folioData)}}function M(l,s){if(1&l&&(t.TgZ(0,"tr",78)(1,"td",92),t._uU(2),t.qZA(),t.TgZ(3,"td",92),t._uU(4),t.qZA(),t.TgZ(5,"td",92),t._uU(6),t.qZA(),t.TgZ(7,"td",92),t._uU(8),t.qZA(),t.TgZ(9,"td",92),t._uU(10),t.qZA(),t.TgZ(11,"td",92),t._uU(12),t.qZA(),t.TgZ(13,"td",92),t._uU(14),t.qZA()()),2&l){const o=s.$implicit;t.xp6(2),t.Oqu(o.symbol),t.xp6(2),t.Oqu(o.price),t.xp6(2),t.Oqu(o.qnty),t.xp6(2),t.Oqu(o.amt),t.xp6(2),t.Oqu(o.brokerage),t.xp6(2),t.Oqu(o.namt),t.xp6(2),t.Oqu(o.sector)}}function N(l,s){if(1&l&&(t.O4$(),t.kcU(),t.TgZ(0,"tr")(1,"td",86)(2,"table",87)(3,"thead",88)(4,"tr")(5,"th",89),t._uU(6,"Symbol"),t.qZA(),t.TgZ(7,"th",89),t._uU(8,"Price"),t.qZA(),t.TgZ(9,"th",89),t._uU(10,"Quantity"),t.qZA(),t.TgZ(11,"th",89),t._uU(12,"Amount"),t.qZA(),t.TgZ(13,"th",89),t._uU(14,"Brokerage"),t.qZA(),t.TgZ(15,"th",89),t._uU(16,"Net Amount"),t.qZA(),t.TgZ(17,"th",89),t._uU(18,"Sector"),t.qZA()()(),t.TgZ(19,"tbody",90),t.YNc(20,M,15,7,"tr",91),t.qZA()()()()),2&l){const o=t.oxw().$implicit;t.xp6(20),t.Q6J("ngForOf",o.Folio_rec)}}function k(l,s){if(1&l){const o=t.EpF();t.ynx(0),t.TgZ(1,"tr",78)(2,"td",79)(3,"button",80),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.KtG(r.showDetails=!r.showDetails)}),t.O4$(),t.TgZ(4,"svg",81),t._UZ(5,"path",82),t.qZA()()(),t.kcU(),t.TgZ(6,"td",79),t._uU(7),t.qZA(),t.TgZ(8,"td",79),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td",79),t._uU(12),t.qZA(),t.TgZ(13,"td",79),t._uU(14),t.qZA(),t.TgZ(15,"td",79),t._uU(16),t.qZA(),t.TgZ(17,"td",79),t._uU(18),t.qZA(),t.TgZ(19,"td",79),t._uU(20),t.qZA(),t.TgZ(21,"td",83)(22,"button",80),t.NdJ("click",function(){const r=t.CHM(o).$implicit,i=t.oxw(2);return t.KtG(i.editCNNote(r))}),t.O4$(),t.TgZ(23,"svg",62),t._UZ(24,"path",84),t.qZA()()()(),t.YNc(25,N,21,1,"tr",85),t.BQk()}if(2&l){const o=s.$implicit;t.xp6(4),t.ekj("transform",o.showDetails)("rotate-90",o.showDetails),t.xp6(3),t.Oqu(o.cn_no),t.xp6(2),t.Oqu(t.lcZ(10,12,o.cn_date)),t.xp6(3),t.Oqu(o.broker),t.xp6(2),t.Oqu(o.type),t.xp6(2),t.Oqu(o.folio),t.xp6(2),t.Oqu(o.oth_chg),t.xp6(2),t.Oqu(o.famt),t.xp6(5),t.Q6J("ngIf",o.showDetails)}}function U(l,s){if(1&l){const o=t.EpF();t.TgZ(0,"div",68)(1,"div",12)(2,"div",14)(3,"h3",60),t._uU(4,"All Contract Notes"),t.qZA(),t.TgZ(5,"button",16),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.Show_cn_note=!1)}),t.O4$(),t.TgZ(6,"svg",17),t._UZ(7,"path",18),t.qZA()()(),t.kcU(),t.TgZ(8,"table",75)(9,"thead",76)(10,"tr"),t._UZ(11,"th",77),t.TgZ(12,"th",77),t._uU(13,"CN No"),t.qZA(),t.TgZ(14,"th",77),t._uU(15,"CN Date"),t.qZA(),t.TgZ(16,"th",77),t._uU(17,"Broker"),t.qZA(),t.TgZ(18,"th",77),t._uU(19,"Type"),t.qZA(),t.TgZ(20,"th",77),t._uU(21,"Folio"),t.qZA(),t.TgZ(22,"th",77),t._uU(23,"Other Charges"),t.qZA(),t.TgZ(24,"th",77),t._uU(25,"Final Amount"),t.qZA(),t.TgZ(26,"th",77),t._uU(27,"Action"),t.qZA()()(),t.TgZ(28,"tbody",73),t.YNc(29,k,26,14,"ng-container",39),t.qZA()(),t.TgZ(30,"div",56)(31,"button",57),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.openModal())}),t._uU(32,"Add New"),t.qZA(),t.TgZ(33,"button",58),t._uU(34,"Cancel"),t.qZA()()()()}if(2&l){const o=t.oxw();t.xp6(29),t.Q6J("ngForOf",o.cn_notes)}}function J(l,s){1&l&&(t.TgZ(0,"div",68)(1,"div",93),t._UZ(2,"div",94),t.qZA()())}const E=[{path:"",component:(()=>{const s=class{constructor(e,n){this.fb=e,this.nseService=n,this.showPopup=!1,this.folioData=[],this.nseRecords=[],this.nseRecords_all=[],this.cn_notes=[],this.tableData={cn_no:"",symbol:"",price:"",qnty:"",amt:"",brokerage:"",broker:"",pdate:"",namt:"",folio:"",type:"",rid:"RID"+Date.now(),sector:""},this.showDetails=!1,this.Show_cn_note=!1,this.Show_all_rec=!1,this.isEdit=!1,this.show_progress=!1,this.documentForm=this.fb.group({id:[""],cn_no:["",a.kI.required],cn_date:["",a.kI.required],broker:["",a.kI.required],type:["EQUITY",a.kI.required],folio:["",a.kI.required],oth_chg:[""],famt:["",a.kI.required]})}ngOnInit(){document.addEventListener("keydown",e=>{if(document.getElementById("famt")===document.activeElement&&e.ctrlKey&&("s"===e.key||"S"===e.key)){e.preventDefault();const r=JSON.stringify(this.nseRecords);console.log(r)}}),this.initializeData()}initializeData(){var e=this;return function f(l){return function(){var s=this,o=arguments;return new Promise(function(e,n){var r=l.apply(s,o);function i(d){h(r,e,n,i,c,"next",d)}function c(d){h(r,e,n,i,c,"throw",d)}i(void 0)})}}(function*(){try{yield e.fetchNSERecords(),yield e.fetchFolioData(),yield e.fetchCnNoteData()}catch(n){console.error("Error during initialization:",n)}})()}updateCountry(e){console.log("Blank Row Values:",this.tableData),this.nseRecords[e]={...this.nseRecords[e],...this.tableData},this.tableData={symbol:"",price:"",qnty:"",amt:"",brokerage:"",cn_no:document.getElementById("cn_no").value,broker:document.getElementById("broker").value,pdate:document.getElementById("cn_date").value,namt:"",folio:document.getElementById("folio").value,type:document.getElementById("type").value,rid:"RID"+Date.now(),sector:""}}updateRowData(e){e.cn_no=this.documentForm.get("cn_no")?.value,e.broker=this.documentForm.get("broker")?.value,e.pdate=this.documentForm.get("cn_date")?.value,e.folio=this.documentForm.get("folio")?.value,e.type=this.documentForm.get("type")?.value;const n=this.nseRecords.findIndex(d=>d.symbol===e.symbol&&d.rid===e.rid);-1!==n?(console.log("UPDATE"),this.nseRecords[n]=e):(console.log("NEW"),this.nseRecords.push(e)),this.tableData={cn_no:"",symbol:"",price:"",qnty:"",amt:"",brokerage:"",broker:e.broker,pdate:e.pdate,namt:"",folio:e.folio,type:e.type,rid:"RID"+Date.now(),sector:""};const r=this.nseRecords.reduce((d,_)=>d+parseFloat(_.namt||0),0);this.documentForm.get("famt")?.setValue(r);const i=document.getElementById("famt1");i&&(i.value=r.toString()),console.log("Updating row data at index:",this.nseRecords.length,e);const c=document.querySelector(".data-table tbody tr:first-child td input");c&&c.focus()}deleteRowData(e){if(confirm("Are you sure you want to delete this row?")){const n=this.nseRecords.findIndex(d=>d.symbol===e.symbol&&d.rid===e.rid);-1!==n&&this.nseRecords.splice(n,1);const r=this.nseRecords.reduce((d,_)=>d+parseFloat(_.namt||0),0);this.documentForm.get("famt")?.setValue(r);const i=document.getElementById("famt1");i&&(i.value=r.toString()),console.log("Deleting row data at index:",this.nseRecords.length,e);const c=document.querySelector(".data-table tbody tr:first-child td input");c&&c.focus()}}openModal(){this.showPopup=!0,setTimeout(()=>{const e=document.getElementById("cn_no");e&&e.focus()},0)}closemodal(){this.nseRecords=[],this.documentForm.reset(),this.showPopup=!1,this.isEdit=!1}fetchFolioData(){this.nseService.getAllFolioRecords().subscribe(e=>{this.folioData=e,console.log("Folio data:",this.folioData)})}gs_sheet(){this.nseService.gs_sheet().subscribe(e=>{console.log(e)})}fetchCnNoteData(){this.nseService.getAllCnNote().subscribe(e=>{this.cn_notes=e,console.log("Folio data:",this.cn_notes)})}fetchNSERecords(){this.nseService.getNSERecords().subscribe(e=>{this.nseRecords_all=e},e=>{console.error("Error fetching NSE records:",e),alert("Error fetching NSE records: "+e.message)})}onSubmit(){if(this.documentForm.valid){const e=document.getElementById("oth_chg1"),n=document.getElementById("famt1");this.documentForm.get("famt")?.setValue(n.value),this.documentForm.get("oth_chg")?.setValue(e.value),this.isEdit?this.nseService.updateData(this.documentForm.value,this.nseRecords).subscribe(r=>{console.log("Folio data submitted:",r)},r=>{console.error("Error submitting folio data:",r)}):this.nseService.submitData(this.documentForm.value,this.nseRecords).subscribe(r=>{console.log("Folio data submitted:",r)},r=>{console.error("Error submitting folio data:",r)}),this.closemodal()}else{const e=Object.keys(this.documentForm.controls).find(n=>this.documentForm.controls[n].invalid);if(e){const n=this.documentForm.get(e);n&&(alert(`Error in input: ${e}`),n.markAsTouched())}}}handleKeyDown(e){const n=document.activeElement;if("Enter"===e.key){if(e.preventDefault(),"INPUT"===n.tagName){const r=this.getNextVisibleElement(n);r&&r.focus()}}else"Escape"===e.key&&confirm("Are you sure you want to close the modal?")&&(this.showPopup=!1)}placeCaret(e){const n=document.createRange(),r=window.getSelection();n.selectNodeContents(e),n.collapse(!1),r.removeAllRanges(),r.addRange(n)}getNextVisibleElement(e){const n=Array.from(document.querySelectorAll('input, [contenteditable="true"]'));for(let i=n.indexOf(e)+1;i<n.length;i++)if(null!==n[i].offsetParent)return n[i];return null}getNextElement(e){const n=Array.from(document.querySelectorAll('input, [contenteditable="true"]')),r=n.indexOf(e);return n[r+1]||null}getPreviousElement(e){const n=Array.from(document.querySelectorAll('input, [contenteditable="true"]')),r=n.indexOf(e);return n[r-1]||null}calculateAmount(e){e.price&&e.qnty&&(e.amt=e.price*e.qnty)}calculatenAmount(e){void 0!==e.amt&&void 0!==e.brokerage&&(e.namt=parseFloat(e.amt)+parseFloat(e.brokerage))}updateCharges(){const e=document.getElementById("oth_chg"),n=document.getElementById("oth_chg1"),r=document.getElementById("famt"),i=document.getElementById("famt1");if(n&&i){e.value=n.value;const _=(parseFloat(n.value)||0)+this.nseRecords.reduce((F,S)=>F+parseFloat(S.namt||0),0);r.value=_.toString(),i.value=_.toString()}}editCNNote(e){this.isEdit=!0,this.documentForm.patchValue({id:e._id,cn_no:e.cn_no,cn_date:this.formatDate(e.cn_date),broker:e.broker,type:e.type,folio:e.folio,oth_chg:e.oth_chg,famt:e.famt}),this.nseRecords=e.Folio_rec,this.openModal()}formatDate(e){return e?new Date(e).toISOString().split("T")[0]:""}};let l=s;return s.\u0275fac=function(n){return new(n||s)(t.Y36(a.qu),t.Y36(x))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-nse"]],decls:24,vars:4,consts:[[1,"bg-gradient-to-r","from-red-600","to-black","min-h-[50px]","flex","items-center","justify-between","shadow-lg"],[1,"flex","items-center","space-x-4"],[1,"text-white","font-semibold","text-lg"],[1,"bg-red-700","hover:bg-red-800","text-white","px-4","py-1","rounded",3,"click"],[1,"bg-black","hover:bg-gray-900","text-white","px-4","py-1","rounded"],[1,"bg-red-700","hover:bg-red-800","text-white","px-4","py-1","rounded"],[1,"container","mx-auto","p-6"],[1,"text-3xl","font-bold","mb-6"],[1,"text-lg","text-gray-700","mb-4"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-20"],[1,"bg-white","rounded-lg","border-4","border-lime-500","w-full","lg:w-4/5","shadow-lg","overflow-auto"],[3,"formGroup","ngSubmit","keydown"],[1,"flex","justify-between","items-center","bg-lime-300","p-4","rounded-t-lg"],["class","text-xl font-bold mb-4",4,"ngIf"],[1,"text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"py-2","px-6"],[1,"grid","grid-cols-2","gap-4"],["for","cn_no",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","cn_no","formControlName","cn_no","required","",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],["for","cn_date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","cn_date","formControlName","cn_date","required","",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],["for","broker",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","broker","formControlName","broker","required","",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],["for","folio",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","folio","formControlName","folio","required","",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],["type","hidden","formControlName","type","id","type",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],["type","hidden","id","oth_chg","formControlName","oth_chg","name","oth_chg",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],["type","hidden","id","famt","formControlName","famt",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2"],[1,"table-fixed","w-full","data-table"],[1,"w-auto","text-left"],[1,"w-auto",2,"display","none"],[1,"cursor-pointer","py-2","px-4"],[1,"w-auto"],["list","sym-list",1,"w-full","border","border-gray-300","rounded","p-1",3,"ngModel","ngModelChange"],["id","sym-list",1,"h-5"],[4,"ngFor","ngForOf"],[1,"w-full","border","border-gray-300","rounded","p-1",3,"ngModel","ngModelChange"],[1,"w-full","border","border-gray-300","rounded","p-1",3,"ngModel","ngModelChange","keydown.enter"],[2,"display","none"],[1,"rounded","p-1",3,"ngModel","ngModelChange"],[1,"py-2","px-4","w-auto","text-center"],["aria-label","Edit",1,"bg-transparent","border-0","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","red","viewBox","0 0 16 16",1,"bi","bi-plus-circle"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM8 1a7 7 0 1 1 0 14A7 7 0 0 1 8 1z"],[1,"py-2","px-6","flex","justify-between"],[1,"w-full"],["for","oth_chg1",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","oth_chg1","name","oth_chg1",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2",3,"ngModel","ngModelChange"],[1,"ml-4","w-full"],["for","famt1",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","famt1",1,"border-2","focus:blink","focus:outline-none","w-full","block","mt-2",3,"ngModel","ngModelChange"],[1,"bg-lime-300","py-2","px-6","rounded-b-lg","flex","justify-end"],["type","button",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"text-white","bg-orange-700","hover:bg-orange-800","focus:ring-4","focus:outline-none","focus:ring-orange-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-orange-600","dark:hover:bg-orange-700","dark:focus:ring-orange-800","ml-2"],[1,"text-white","bg-red-700","hover:bg-red-800","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800","ml-2"],[1,"text-xl","font-bold","mb-4"],["aria-label","Edit",1,"bg-transparent","border-0","cursor-pointer","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","red","viewBox","0 0 16 16",1,"bi","bi-pencil"],["d","M12.146.854a.5.5 0 0 1 .708 0l1.292 1.292a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-4 1.5a.5.5 0 0 1-.65-.65l1.5-4a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 4 9.707V11h1.293l7.207-7.207-1.293-1.293zM1 13.5V15h1.5l4-4H5l-4 4z"],["aria-label","Edit",1,"bg-transparent","border-0","cursor-pointer","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","red","viewBox","0 0 16 16",1,"bi","bi-trash"],["d","M5.5 5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5V6h3.5a.5.5 0 0 1 0 1h-1l-.445 6.23A2 2 0 0 1 10.61 15H5.39a2 2 0 0 1-1.945-1.77L3 7H2a.5.5 0 0 1 0-1H5.5V5zm1 1v6.5a.5.5 0 0 0 1 0V6h-1zm3 0v6.5a.5.5 0 0 0 1 0V6h-1z"],["d","M14.5 3a1 1 0 0 1-1-1H2.5a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1h16a1 1 0 0 1-1 1h-.5z"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-10"],["nowrap",""],["id","folio_record",1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"px-6","py-4","whitespace-nowrap"],[1,"table-fixed","w-full","divide-y","divide-gray-200","border","border-gray-300"],[1,"bg-cyan-500"],[1,"px-4","py-2","text-white","border","border-gray-300"],[1,"hover:bg-gray-50"],[1,"px-4","py-2","border","border-gray-300"],[1,"text-blue-600","hover:text-blue-800",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"px-4","py-2","border","border-gray-300","text-center"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"],[4,"ngIf"],["colspan","8",1,"px-4","py-2","bg-gray-50"],[1,"min-w-full","divide-y","divide-gray-200","border","border-gray-300"],[1,"bg-blue-500"],[1,"px-3","py-2","text-sm","text-white","border","border-gray-300"],[1,"bg-white"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"px-3","py-2","text-sm","border","border-gray-300"],[1,"flex","justify-center","items-center","p-4"],[1,"w-24","h-24","border-8","border-red-500","border-t-transparent","rounded-full","animate-spin"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"NSE Trading"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return r.Show_cn_note=!r.Show_cn_note}),t._uU(5,"CN. Notes"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return r.Show_all_rec=!r.Show_all_rec}),t._uU(7,"Show All"),t.qZA()(),t.TgZ(8,"div",1)(9,"button",4),t._uU(10,"Settings"),t.qZA(),t.TgZ(11,"button",4),t._uU(12,"Profile"),t.qZA(),t.TgZ(13,"button",5),t._uU(14,"Logout"),t.qZA()()(),t.TgZ(15,"div",6)(16,"h1",7),t._uU(17,"NSE Section"),t.qZA(),t.TgZ(18,"p",8),t._uU(19,"This is the NSE section of our application."),t.qZA(),t.YNc(20,q,118,20,"div",9),t.YNc(21,w,43,1,"div",10),t.qZA(),t.YNc(22,U,35,1,"div",10),t.YNc(23,J,3,0,"div",10)),2&n&&(t.xp6(20),t.Q6J("ngIf",r.showPopup),t.xp6(1),t.Q6J("ngIf",r.Show_all_rec),t.xp6(1),t.Q6J("ngIf",r.Show_cn_note),t.xp6(1),t.Q6J("ngIf",r.show_progress))},dependencies:[g.sg,g.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.On,a.sg,a.u,g.uU],styles:["@keyframes _ngcontent-%COMP%_blink{0%{border-color:#0f0}50%{border-color:violet}to{border-color:#0f0}}.focus\\:blink[_ngcontent-%COMP%]:focus{animation:_ngcontent-%COMP%_blink 2s infinite}.data-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #000;padding:4px}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:30px}"]}),l})()}];let O=(()=>{const s=class{};let l=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[m.Bz.forChild(E),m.Bz]}),l})(),D=(()=>{const s=class{};let l=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.ez,O,a.u5,a.UX]}),l})()}}]);