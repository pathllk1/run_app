"use strict";(self.webpackChunk_15_01_2025=self.webpackChunk_15_01_2025||[]).push([[621],{9621:(A,g,u)=>{u.r(g),u.d(g,{DocsModule:()=>T});var c=u(6895),p=u(529),a=u(433),b=u(6773),e=u(8256);let h=(()=>{const r=class{constructor(t){this.http=t,this.apiUrl="/api/docs/"}getAllDocs(){return this.http.get(this.apiUrl)}getDocById(t){return this.http.get(`${this.apiUrl}/${t}`)}createDoc(t){return this.http.post(this.apiUrl,t)}updateDoc(t,s){return this.http.put(`${this.apiUrl}/${t}`,s)}deleteDoc(t){return this.http.delete(this.apiUrl+`delete_doc/${t}`)}searchDocs(t){return this.http.get(`${this.apiUrl}/search?q=${t}`)}getPosts(){return this.http.get(this.apiUrl+"send_email")}getAll(){return this.http.get(this.apiUrl+"get_docs")}addTst(t){return this.http.post(this.apiUrl+"add_edit",t,{headers:{"content-type":"application/json"}})}};let o=r;return r.\u0275fac=function(s){return new(s||r)(e.LFG(p.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),o})();function f(o,r){1&o&&(e.TgZ(0,"h3",50),e._uU(1,"Add New Document"),e.qZA())}function m(o,r){1&o&&(e.TgZ(0,"h3",50),e._uU(1,"Update Document"),e.qZA())}function x(o,r){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const i=r.$implicit;e.xp6(1),e.hij(" ",i.type," ")}}function y(o,r){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const i=r.$implicit;e.xp6(1),e.hij(" ",i.status," ")}}function k(o,r){if(1&o){const i=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(s){e.CHM(i);const n=e.oxw(2);return e.KtG(n.deleteDoc(s))}),e._uU(1,"Delete"),e.qZA()}}function Z(o,r){if(1&o){const i=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"form",21),e.NdJ("ngSubmit",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(3,"div",22),e.YNc(4,f,2,0,"h3",23),e.YNc(5,m,2,0,"h3",23),e.TgZ(6,"button",24),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.closePopup())}),e.O4$(),e.TgZ(7,"svg",25),e._UZ(8,"path",26),e.qZA()()(),e.kcU(),e.TgZ(9,"div",27)(10,"div",28)(11,"label",29),e._uU(12,"Reference No:"),e.qZA(),e._UZ(13,"input",30),e.qZA(),e.TgZ(14,"div",28)(15,"label"),e._uU(16,"Description:"),e.qZA(),e._UZ(17,"textarea",31),e.qZA(),e.TgZ(18,"div",28)(19,"label"),e._uU(20,"Start Date:"),e.qZA(),e._UZ(21,"input",32),e.qZA(),e.TgZ(22,"div",28)(23,"label"),e._uU(24,"End Date:"),e.qZA(),e._UZ(25,"input",33),e.qZA(),e.TgZ(26,"div",28)(27,"label"),e._uU(28,"Type:"),e.qZA(),e._UZ(29,"input",34),e.TgZ(30,"datalist",35),e.YNc(31,x,2,1,"option",36),e.qZA()(),e.TgZ(32,"div",37)(33,"div",38)(34,"label"),e._uU(35,"Value:"),e.qZA(),e._UZ(36,"input",39),e.qZA(),e.TgZ(37,"div",38)(38,"label"),e._uU(39,"Remaining Days:"),e.qZA(),e._UZ(40,"input",40),e.qZA()(),e.TgZ(41,"div",41)(42,"label",42),e._uU(43,"Status"),e.qZA(),e._UZ(44,"input",43),e.TgZ(45,"datalist",44),e.YNc(46,y,2,1,"option",36),e.qZA()(),e._UZ(47,"input",45),e.qZA(),e.TgZ(48,"div",46)(49,"button",47),e._uU(50,"Submit"),e.qZA(),e.TgZ(51,"button",48),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.closePopup())}),e._uU(52," Cancel"),e.qZA(),e.YNc(53,k,2,0,"button",49),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.addForm),e.xp6(2),e.Q6J("ngIf",!i.isEdit),e.xp6(1),e.Q6J("ngIf",i.isEdit),e.xp6(26),e.Q6J("ngForOf",i.docs),e.xp6(15),e.Q6J("ngForOf",i.docs),e.xp6(7),e.Q6J("ngIf",i.isEdit)}}function _(o,r){if(1&o){const i=e.EpF();e.TgZ(0,"tr",52)(1,"td",53),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.qZA(),e.TgZ(5,"td",53),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td",53),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td",53),e._uU(12),e.qZA(),e.TgZ(13,"td",53),e._uU(14),e.qZA(),e.TgZ(15,"td",54),e._uU(16),e.qZA(),e.TgZ(17,"td",53),e._uU(18),e.qZA(),e.TgZ(19,"td",53)(20,"button",55),e.NdJ("click",function(){const n=e.CHM(i).$implicit,d=e.oxw();return e.KtG(d.editDoc(n))}),e.O4$(),e.TgZ(21,"svg",56),e._UZ(22,"path",57)(23,"path",58),e.qZA()()()()}if(2&o){const i=r.$implicit,t=e.oxw();e.xp6(2),e.Oqu(i.refno),e.xp6(2),e.Oqu(i.desc),e.xp6(2),e.Oqu(e.xi3(7,9,i.sdate,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(10,12,i.edate,"dd/MM/yyyy")),e.xp6(3),e.Oqu(i.type),e.xp6(2),e.Oqu(i.val),e.xp6(1),e.Q6J("ngClass",t.getRemainingDaysClass(i.rage)),e.xp6(1),e.Oqu(i.rage),e.xp6(2),e.Oqu(i.status)}}const v=[{path:"",component:(()=>{const r=class{constructor(t,s){this.fb=t,this.docsService=s,this.isEdit=!1,this.docs=[],this.showPopup=!1,this.showPopup_edit=!1,this.searchText="",this.filteredType=[],this.highlightedIndex=-1,this.addForm=this.fb.group({refno:[""],desc:[""],sdate:[""],edate:["",a.kI.required],type:[""],val:[""],rage:[""],id:[""],status:[""]})}ngOnInit(){this.getAll(),this.docsService.getPosts().subscribe(t=>{console.log(t)})}getAll(){this.docsService.getAll().subscribe(t=>{this.docs=t,console.log(this.docs)})}onSubmit(){this.addForm.valid?this.docsService.addTst(this.addForm.value).subscribe(t=>{console.log(t),this.addForm.reset(),this.getAll(),this.showPopup=!1}):alert("invalid data")}editDoc(t){this.addForm.patchValue({refno:t.refno,desc:t.desc,sdate:this.formatDate(t.sdate),edate:this.formatDate(t.edate),type:t.type,val:t.val,rage:t.rage,id:t._id,status:t.status}),this.isEdit=!0,this.openPopup()}openPopup(){this.showPopup=!0}closePopup(){this.showPopup=!1,this.addForm.reset(),this.isEdit=!1}formatDate(t){return t?new Date(t).toISOString().split("T")[0]:""}filteredRows(){return this.searchText?this.docs.filter(t=>Object.values(t).some(s=>String(s).toLowerCase().includes(this.searchText.toLowerCase()))):this.docs}exportToCSV(){const t=this.docs.map(l=>({RefNo:l.refno,Description:l.desc,StartDate:l.sdate,EndDate:l.edate,Type:l.type,Value:l.val})),s="data:text/csv;charset=utf-8,"+Object.keys(t[0]).join(",")+"\n"+t.map(l=>Object.values(l).join(",")).join("\n"),n=encodeURI(s),d=document.createElement("a");d.setAttribute("href",n),d.setAttribute("download","table_data.csv"),document.body.appendChild(d),d.click()}deleteDoc(t){t.preventDefault();const s=this.addForm.get("id")?.value;s&&window.confirm("Are you sure you want to delete this document?")&&this.docsService.deleteDoc(s).subscribe(d=>{this.closePopup(),this.getAll()},d=>{console.error("Error deleting document:",d)})}getRemainingDaysClass(t){return t>=60?"bg-green-200":t>=41?"bg-orange-200":"bg-red-200"}};let o=r;return r.\u0275fac=function(s){return new(s||r)(e.Y36(a.qu),e.Y36(h))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-docs"]],decls:41,vars:3,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",4,"ngIf"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"flex","flex-column","sm:flex-row","flex-wrap","space-y-4","sm:space-y-0","items-center","justify-between","pb-4"],[1,"bg-blue-500","text-white","px-4","py-2","rounded","mr-2","inline-flex","items-center",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","red","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 7.757v8.486M7.757 12h8.486M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"bg-lime-400","text-white","px-4","py-2","rounded","mb-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-excel"],["d","M5.5 0a.5.5 0 0 1 .5.5v1H12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h3.5zM5 1v1h6V1H5zm7 1H6v1h6V2zM1 2v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5H9.5a.5.5 0 0 1-.5-.5V2H2a1 1 0 0 0-1 1zm2.5 5.5h1v1h-1v-1zm0 2h1v1h-1v-1zm2-2h1v1h-1v-1zm0 2h1v1h-1v-1zm2-2h1v1h-1v-1zm0 2h1v1h-1v-1z"],["for","table-search",1,"sr-only"],[1,"relative"],[1,"absolute","inset-y-0","left-0","rtl:inset-r-0","rtl:right-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","text-gray-500","dark:text-gray-400"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["type","text","id","table-search","placeholder","Search for items",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","w-80","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModel","ngModelChange"],[1,"min-w-full","bg-white","border","border-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"bg-blue-100","px-6","py-3","border"],["class","hover:bg-gray-100 py-1",4,"ngFor","ngForOf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-10"],[1,"bg-white","rounded-lg","border-4","border-lime-500","w-1/3","shadow-lg"],[3,"formGroup","ngSubmit"],[1,"flex","justify-between","items-center","bg-lime-300","p-4","rounded-t-lg"],["class","text-xl font-bold mb-4",4,"ngIf"],[1,"text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-6"],[1,"mb-2"],[1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","formControlName","refno",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["formControlName","desc","rows","4",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","date","formControlName","sdate",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","date","formControlName","edate","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","text","list","type-list","formControlName","type",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["id","type-list"],[4,"ngFor","ngForOf"],[1,"mb-2","flex","space-x-4"],[1,"flex","flex-col","space-y-1","w-1/2"],["type","text","formControlName","val",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["type","text","formControlName","rage",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"mb-4"],["for","status",1,"block","text-sm","font-medium","text-gray-700"],["type","text","list","status-list","id","status","formControlName","status",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["id","status-list"],["type","hidden","formControlName","id"],[1,"bg-lime-300","p-4","rounded-b-lg","flex","justify-end"],["type","submit",1,"text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],[1,"text-white","bg-orange-700","hover:bg-orange-800","focus:ring-4","focus:outline-none","focus:ring-orange-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-orange-600","dark:hover:bg-orange-700","dark:focus:ring-orange-800","ml-2",3,"click"],["class","text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800 ml-2",3,"click",4,"ngIf"],[1,"text-xl","font-bold","mb-4"],[1,"text-white","bg-red-700","hover:bg-red-800","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800","ml-2",3,"click"],[1,"hover:bg-gray-100","py-1"],[1,"px-2","border"],[1,"px-2","border",3,"ngClass"],[1,"bg-blue-500","text-white","rounded",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"]],template:function(s,n){1&s&&(e.YNc(0,Z,54,6,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"button",3),e.NdJ("click",function(){return n.openPopup()}),e.O4$(),e.TgZ(5,"svg",4),e._UZ(6,"path",5),e.qZA(),e._uU(7," Add New"),e.qZA(),e.kcU(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.exportToCSV()}),e.O4$(),e.TgZ(9,"svg",7),e._UZ(10,"path",8),e.qZA()()(),e.kcU(),e.TgZ(11,"label",9),e._uU(12,"Search"),e.qZA(),e.TgZ(13,"div",10)(14,"div",11),e.O4$(),e.TgZ(15,"svg",12),e._UZ(16,"path",13),e.qZA()(),e.kcU(),e.TgZ(17,"input",14),e.NdJ("ngModelChange",function(l){return n.searchText=l}),e.qZA()()(),e.TgZ(18,"div",1)(19,"table",15)(20,"thead",16)(21,"tr")(22,"th",17),e._uU(23,"Ref No"),e.qZA(),e.TgZ(24,"th",17),e._uU(25,"Description"),e.qZA(),e.TgZ(26,"th",17),e._uU(27,"Start Date"),e.qZA(),e.TgZ(28,"th",17),e._uU(29,"End Date"),e.qZA(),e.TgZ(30,"th",17),e._uU(31,"Type"),e.qZA(),e.TgZ(32,"th",17),e._uU(33,"Value"),e.qZA(),e.TgZ(34,"th",17),e._uU(35,"Remaining Days"),e.qZA(),e.TgZ(36,"th",17),e._uU(37,"Status"),e.qZA(),e.TgZ(38,"th",17),e._uU(39,"Action"),e.qZA()()(),e.YNc(40,_,24,15,"tr",18),e.qZA()()()),2&s&&(e.Q6J("ngIf",n.showPopup),e.xp6(17),e.Q6J("ngModel",n.searchText),e.xp6(23),e.Q6J("ngForOf",n.filteredRows()))},dependencies:[c.mk,c.sg,c.O5,a._Y,a.YN,a.Kr,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.sg,a.u,c.uU]}),o})()}];let w=(()=>{const r=class{};let o=r;return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[b.Bz.forChild(v),b.Bz]}),o})(),T=(()=>{const r=class{};let o=r;return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,w,p.JF,a.u5,a.UX]}),o})()}}]);