"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=247,exports.ids=[247],exports.modules={38247:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AuthModule:()=>AuthModule});var common=__webpack_require__(89318),router=__webpack_require__(14195),core=__webpack_require__(40305);function ToastComponent_div_0_Template(rf,ctx){if(1&rf){const _r2=core.EpF();core.TgZ(0,"div",1)(1,"div",2),core._uU(2),core.TgZ(3,"button",3),core.NdJ("click",__name(function(){core.CHM(_r2);const ctx_r1=core.oxw();return core.KtG(ctx_r1.close())},"ToastComponent_div_0_Template_button_click_3_listener")),core._uU(4,"Close"),core.qZA()()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(2),core.hij(" ",ctx_r0.message," ")}}__name(ToastComponent_div_0_Template,"ToastComponent_div_0_Template");const _ToastComponent=class{constructor(){this.message="",this.show=!1}display(message){this.message=message,this.show=!0,setTimeout(()=>this.close(),3e3)}close(){this.show=!1}};let ToastComponent=_ToastComponent;__name(ToastComponent,"ToastComponent"),_ToastComponent.\u0275fac=__name(function(t){return new(t||_ToastComponent)},"ToastComponent_Factory"),_ToastComponent.\u0275cmp=core.Xpm({type:_ToastComponent,selectors:[["app-toast"]],inputs:{message:"message"},decls:1,vars:1,consts:[["class","fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",4,"ngIf"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-gray-800","bg-opacity-50"],[1,"bg-red-500","text-white","p-4","rounded-md","shadow-lg"],[1,"ml-4","text-white","underline",3,"click"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,ToastComponent_div_0_Template,5,1,"div",0),2&rf&&core.Q6J("ngIf",ctx.show)},"ToastComponent_Template"),dependencies:[common.O5],encapsulation:2});var http=__webpack_require__(48664);const _AuthService=class{constructor(http2){this.http=http2,this.apiUrl="/api/auth/"}register(userData){return this.http.post(this.apiUrl+"register",userData)}login(credentials){return this.http.post(this.apiUrl+"login",credentials)}};let AuthService=_AuthService;__name(AuthService,"AuthService"),_AuthService.\u0275fac=__name(function(t){return new(t||_AuthService)(core.LFG(http.eN))},"AuthService_Factory"),_AuthService.\u0275prov=core.Yz7({token:_AuthService,factory:_AuthService.\u0275fac,providedIn:"root"});var token_storage_service=__webpack_require__(36145),fesm2020_forms=__webpack_require__(43070);function LoginComponent_div_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",1)(1,"div",2)(2,"h2",3),core._uU(3,"Login"),core.qZA(),core.TgZ(4,"form",4),core.NdJ("ngSubmit",__name(function(){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.onLogin())},"LoginComponent_div_0_Template_form_ngSubmit_4_listener")),core.TgZ(5,"div",5)(6,"label",6),core._uU(7,"Username:"),core.qZA(),core.TgZ(8,"input",7),core.NdJ("ngModelChange",__name(function($event){core.CHM(_r3);const ctx_r4=core.oxw();return core.KtG(ctx_r4.credentials.username=$event)},"LoginComponent_div_0_Template_input_ngModelChange_8_listener")),core.qZA()(),core.TgZ(9,"div",8)(10,"label",9),core._uU(11,"Password:"),core.qZA(),core.TgZ(12,"input",10),core.NdJ("ngModelChange",__name(function($event){core.CHM(_r3);const ctx_r5=core.oxw();return core.KtG(ctx_r5.credentials.password=$event)},"LoginComponent_div_0_Template_input_ngModelChange_12_listener")),core.qZA()(),core.TgZ(13,"button",11),core._uU(14,"Login"),core.qZA()(),core._UZ(15,"app-toast"),core.qZA()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(8),core.Q6J("ngModel",ctx_r0.credentials.username),core.xp6(4),core.Q6J("ngModel",ctx_r0.credentials.password)}}function LoginComponent_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",1)(1,"h2",3),core._uU(2,"You are already logged in."),core.qZA()())}__name(LoginComponent_div_0_Template,"LoginComponent_div_0_Template"),__name(LoginComponent_div_1_Template,"LoginComponent_div_1_Template");const _LoginComponent=class{constructor(authService,router2,tokenStorage,platformId){this.authService=authService,this.router=router2,this.tokenStorage=tokenStorage,this.platformId=platformId,this.credentials={username:"",password:""},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMessage="",this.roles=[]}ngOnInit(){(0,common.NF)(this.platformId)&&this.tokenStorage.getToken()&&(this.isLoggedIn=!0,this.roles=this.tokenStorage.getUser().roles)}onLogin(){this.authService.login(this.credentials).subscribe(response=>{this.tokenStorage.saveToken(response.token),this.tokenStorage.saveUser(response),this.isLoginFailed=!1,this.isLoggedIn=!0,this.reloadPage()},error=>{console.error("Login failed",error),this.showToast("Login failed. Please check your credentials.")})}showToast(message){this.toast.display(message)}reloadPage(){window.location.reload()}};let LoginComponent=_LoginComponent;__name(LoginComponent,"LoginComponent"),_LoginComponent.\u0275fac=__name(function(t){return new(t||_LoginComponent)(core.Y36(AuthService),core.Y36(router.F0),core.Y36(token_storage_service.i),core.Y36(core.Lbi))},"LoginComponent_Factory"),_LoginComponent.\u0275cmp=core.Xpm({type:_LoginComponent,selectors:[["app-login"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(ToastComponent,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.toast=_t.first)}},"LoginComponent_Query"),decls:2,vars:2,consts:[["class","flex items-center justify-center h-screen bg-gray-100",4,"ngIf"],[1,"flex","items-center","justify-center","h-screen","bg-gray-100"],[1,"bg-white","p-8","rounded-lg","shadow-md","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","username","name","username","required","","placeholder","Enter your username",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","required","","placeholder","Enter your password",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["type","submit",1,"w-full","bg-blue-500","text-white","py-2","rounded-md","hover:bg-blue-600"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,LoginComponent_div_0_Template,16,2,"div",0),core.YNc(1,LoginComponent_div_1_Template,3,0,"div",0)),2&rf&&(core.Q6J("ngIf",!ctx.isLoggedIn),core.xp6(1),core.Q6J("ngIf",ctx.isLoggedIn))},"LoginComponent_Template"),dependencies:[common.O5,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.Q7,fesm2020_forms.On,fesm2020_forms.F,ToastComponent]});const _RegisterComponent=class{constructor(authService,router2){this.authService=authService,this.router=router2,this.userData={username:"",email:"",fullname:"",password:""}}onRegister(){this.authService.register(this.userData).subscribe(response=>{console.log("Registration successful",response),this.router.navigate(["/login"])},error=>{console.error("Registration failed",error)})}};let RegisterComponent=_RegisterComponent;__name(RegisterComponent,"RegisterComponent"),_RegisterComponent.\u0275fac=__name(function(t){return new(t||_RegisterComponent)(core.Y36(AuthService),core.Y36(router.F0))},"RegisterComponent_Factory"),_RegisterComponent.\u0275cmp=core.Xpm({type:_RegisterComponent,selectors:[["app-register"]],decls:23,vars:4,consts:[[1,"flex","items-center","justify-center","h-screen","bg-gray-100"],[1,"bg-white","p-8","rounded-lg","shadow-md","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit"],[1,"mb-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","username","name","username","required","","placeholder","Enter your username",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","required","","placeholder","Enter your email",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["for","fullname",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","fullname","name","fullname","required","","placeholder","Enter your full name",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","required","","placeholder","Enter your password",1,"mt-1","block","w-full","p-2","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],["type","submit",1,"w-full","bg-blue-500","text-white","py-2","rounded-md","hover:bg-blue-600"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),core._uU(3,"Register"),core.qZA(),core.TgZ(4,"form",3),core.NdJ("ngSubmit",__name(function(){return ctx.onRegister()},"RegisterComponent_Template_form_ngSubmit_4_listener")),core.TgZ(5,"div",4)(6,"label",5),core._uU(7,"Username:"),core.qZA(),core.TgZ(8,"input",6),core.NdJ("ngModelChange",__name(function($event){return ctx.userData.username=$event},"RegisterComponent_Template_input_ngModelChange_8_listener")),core.qZA()(),core.TgZ(9,"div",4)(10,"label",7),core._uU(11,"Email:"),core.qZA(),core.TgZ(12,"input",8),core.NdJ("ngModelChange",__name(function($event){return ctx.userData.email=$event},"RegisterComponent_Template_input_ngModelChange_12_listener")),core.qZA()(),core.TgZ(13,"div",4)(14,"label",9),core._uU(15,"Full Name:"),core.qZA(),core.TgZ(16,"input",10),core.NdJ("ngModelChange",__name(function($event){return ctx.userData.fullname=$event},"RegisterComponent_Template_input_ngModelChange_16_listener")),core.qZA()(),core.TgZ(17,"div",11)(18,"label",12),core._uU(19,"Password:"),core.qZA(),core.TgZ(20,"input",13),core.NdJ("ngModelChange",__name(function($event){return ctx.userData.password=$event},"RegisterComponent_Template_input_ngModelChange_20_listener")),core.qZA()(),core.TgZ(21,"button",14),core._uU(22,"Register"),core.qZA()()()()),2&rf&&(core.xp6(8),core.Q6J("ngModel",ctx.userData.username),core.xp6(4),core.Q6J("ngModel",ctx.userData.email),core.xp6(4),core.Q6J("ngModel",ctx.userData.fullname),core.xp6(4),core.Q6J("ngModel",ctx.userData.password))},"RegisterComponent_Template"),dependencies:[fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.Q7,fesm2020_forms.On,fesm2020_forms.F]});const routes=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:LoginComponent},{path:"register",component:RegisterComponent}],_AuthRoutingModule=class{};let AuthRoutingModule=_AuthRoutingModule;__name(AuthRoutingModule,"AuthRoutingModule"),_AuthRoutingModule.\u0275fac=__name(function(t){return new(t||_AuthRoutingModule)},"AuthRoutingModule_Factory"),_AuthRoutingModule.\u0275mod=core.oAB({type:_AuthRoutingModule}),_AuthRoutingModule.\u0275inj=core.cJS({imports:[router.Bz.forChild(routes),router.Bz]});const _AuthModule=class{};let AuthModule=_AuthModule;__name(AuthModule,"AuthModule"),_AuthModule.\u0275fac=__name(function(t){return new(t||_AuthModule)},"AuthModule_Factory"),_AuthModule.\u0275mod=core.oAB({type:_AuthModule}),_AuthModule.\u0275inj=core.cJS({imports:[common.ez,AuthRoutingModule,fesm2020_forms.u5,fesm2020_forms.UX]})}};